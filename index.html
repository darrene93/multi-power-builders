<!DOCTYPE html><html lang="en" class="scroll-smooth"><head>    <meta charset="UTF-8">    <meta name="viewport" content="width=device-width, initial-scale=1.0">    <title>MULTI POWER BUILDERS PTE. LTD. - Home</title>    <script src="https://cdn.tailwindcss.com"></script>    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">    <script>        tailwind.config = {            theme: {                extend: {                    fontFamily: {                        sans: ['Inter', 'sans-serif'],                    },                    colors: {                        primary: { light: '#f87171', DEFAULT: '#ef4444', dark: '#b91c1c', darkest: '#7f1d1d', },                        secondary: { light: '#f3f4f6', DEFAULT: '#d1d5db', dark: '#374151', darkest: '#111827', }                    }                }            }        }    </script>    <style>        .hero-pattern { background-image: linear-gradient(rgba(0, 0, 0, 0.1) 1px, transparent 1px), linear-gradient(to right, rgba(0, 0, 0, 0.1) 1px, transparent 1px);background-size: 20px 20px;}
        /* Custom styles for the modal and spinner */
        .modal-backdrop {
            transition: opacity 0.3s ease;
        }
        .modal-content {
            transition: transform 0.3s ease;
        }
        .loader {
            border-top-color: #ef4444; /* primary.DEFAULT */
            -webkit-animation: spin 1s linear infinite;
            animation: spin 1s linear infinite;
        }
        @-webkit-keyframes spin {
            0% { -webkit-transform: rotate(0deg); }
            100% { -webkit-transform: rotate(360deg); }
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style></head><body class="font-sans antialiased text-gray-800">    <!-- Header --><header class="bg-white shadow-md p-6 flex justify-between items-center sticky top-0 z-50">        <h1 class="text-xl md:text-2xl font-bold text-red-500">MULTI POWER BUILDERS PTE. LTD.</h1>        <nav class="hidden md:flex items-center space-x-6">            <a href="#" class="text-gray-700 hover:text-red-500 transition duration-300">Home</a>            <a href="#about" class="text-gray-700 hover:text-red-500 transition duration-300">About Us</a>            <a href="#services" class="text-gray-700 hover:text-red-500 transition duration-300">Services</a>            <a href="#projects" class="text-gray-700 hover:text-red-500 transition duration-300">Projects</a>            <a href="#contact" class="text-gray-700 hover:text-red-500 transition duration-300">Contact</a>            <a href="#contact" class="bg-red-500 text-white font-semibold px-5 py-2 rounded-full shadow-md hover:bg-red-600 transition duration-300">Get a Quote</a>        </nav>        <button id="menu-btn" class="md:hidden text-gray-700 hover:text-red-500 focus:outline-none"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg></button>    </header>    <!-- Mobile Menu --><div id="mobile-menu" class="hidden md:hidden bg-white shadow-lg fixed top-0 left-0 right-0 z-40 pt-20">        <nav class="flex flex-col p-4 space-y-2">            <a href="#" class="block px-4 py-2 text-gray-700 rounded-md hover:bg-red-50 hover:text-red-500 transition duration-300">Home</a>            <a href="#about" class="block px-4 py-2 text-gray-700 rounded-md hover:bg-red-50 hover:text-red-500 transition duration-300">About Us</a>            <a href="#services" class="block px-4 py-2 text-gray-700 rounded-md hover:bg-red-50 hover:text-red-500 transition duration-300">Services</a>            <a href="#projects" class="block px-4 py-2 text-gray-700 rounded-md hover:bg-red-50 hover:text-red-500 transition duration-300">Projects</a>            <a href="#contact" class="block px-4 py-2 text-gray-700 rounded-md hover:bg-red-50 hover:text-red-500 transition duration-300">Contact</a>            <a href="#contact" class="block w-full text-center bg-red-500 text-white font-semibold px-5 py-3 rounded-full shadow-md hover:bg-red-600 transition duration-300 mt-2">Get a Quote</a>        </nav>    </div>    <!-- Hero Section (Home) --><section class="relative overflow-hidden bg-gradient-to-r from-red-700 to-red-900 text-white text-center py-32 md:py-40 px-6">        <div class="absolute inset-0 hero-pattern opacity-30"></div>        <div class="relative z-10">            <h2 class="text-4xl md:text-5xl font-extrabold mb-6 tracking-tight drop-shadow-lg">Welcome To MULTI POWER BUILDERS PTE. LTD.</h2>            <p class="max-w-3xl mx-auto text-lg md:text-xl mb-10 text-red-100">A Small Medium Enterprise (SME) registered with the Building and Construction Authority (BCA) in Singapore.</p>            <a href="#services" class.="bg-white text-red-700 font-semibold px-10 py-4 rounded-full shadow-lg hover:bg-red-50 transition duration-300">Discover Our Services</a>        </div>    </section>    <!-- About Us Section --><section id="about" class="py-24 px-8 bg-white">        <div class="max-w-6xl mx-auto grid md:grid-cols-2 gap-12 items-center">            <div><img src="https://images.unsplash.com/photo-1522071820081-009f0129c71c?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&h=400&q=80" alt="Multi Power Builders Team" class="rounded-lg shadow-xl w-full h-auto object-cover" onerror="this.src='https://placehold.co/600x400/ef4444/white?text=Our+Team&font=inter'"></div>            <div class="text-left">                <h3 class="text-4xl font-bold mb-6 text-gray-800">Our Core Offerings</h3>                <p class="text-gray-700 text-lg leading-relaxed mb-6">MULTI POWER BUILDERS PTE. LTD. is a Small Medium Enterprise (SME) registered with the Building and Construction Authority (BCA) in Singapore.</p>                <p class="text-gray-700 text-lg leading-relaxed mb-4">We are committed to delivering high-quality, reliable, and efficient solutions tailored to our clients' needs. Our core business includes:</p>                <ul class="text-gray-700 text-base leading-relaxed mb-8 list-disc ml-4 space-y-1">                  <li>Interior Office & Laboratory Fit Out Works</li>                  <li>Design and Build Electrical</li>                  <li>Design and Build Plumbing and Sanitary for Laboratory</li>                  <li>Design and Build LTA Sky Camera Outdoor IP PTZ with Solar Power System</li>                  <li>Design and Build for ELV (Extra-Low Voltage)</li>                  <li>FOA – Fiber Optic Technician</li>                  <li>Specialist Construction Registration (CW01, ME05, ME01, ME012)</li>                </ul>                <a href="#contact" class="bg-red-500 text-white font-semibold px-8 py-3 rounded-full shadow-md hover:bg-red-600 transition duration-300">Get a Quote</a>            </div>        </div>    </section>    <!-- Services Section --><section id="services" class="py-24 px-8 bg-gray-100">        <h3 class="text-4xl font-bold text-center mb-16 text-gray-800">Our Services</h3>        <div class="grid md:grid-cols-3 gap-10 max-w-6xl mx-auto">            <!-- Service Card 1 --><div class="bg-white rounded-lg p-8 shadow-md hover:shadow-xl transition-shadow duration-300 transform hover:-translate-y-1 flex flex-col">                <img src="https://images.unsplash.com/photo-1573496773905-f5b17e711f47?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=400&h=250&q=80" alt="Office Fit Out" class="rounded-md shadow-sm mb-6 w-full h-48 object-cover" onerror="this.src='https://placehold.co/400x250/fca5a5/7f1d1d?text=Office+Fit+Out&font=inter'">                <h4 class="text-2xl font-semibold text-red-700 mb-4">Interior Office & Laboratory Fit Out Works</h4>                <p class="text-gray-600 text-sm mb-4 flex-grow">End-to-end design, construction, and outfitting for modern offices and specialized laboratories.</p>                <ul class="mt-2 mb-2 text-gray-700 text-xs list-disc ml-4 space-y-1">                  <li>Space planning & design</li>                  <li>Furniture, fixtures, and equipment integration</li>                  <li>Cleanroom construction (lab-specific)</li>                </ul>            </div>            <!-- Service Card 2 --><div class="bg-white rounded-lg p-8 shadow-md hover:shadow-xl transition-shadow duration-300 transform hover:-translate-y-1 flex flex-col">                <img src="https://images.unsplash.com/photo-1664574653716-a826b0a0f443?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=400&h=250&q=80" alt="Electrical Work" class="rounded-md shadow-sm mb-6 w-full h-48 object-cover" onerror="this.src='https://placehold.co/400x250/fca5a5/7f1d1d?text=Electrical+Work&font=inter'">                <h4 class="text-2xl font-semibold text-red-700 mb-4">Design and Build Electrical & ELV</h4>                <p class="text-gray-600 text-sm mb-4 flex-grow">Comprehensive electrical installation services and full-service solutions for ELV systems (security, communication, automation).</p>                <ul class="mt-2 mb-2 text-gray-700 text-xs list-disc ml-4 space-y-1">                  <li>Mains and standby power distribution</li>                  <li>ELV systems (CCTV, PA, data, access control)</li>                  <li>Smart building solutions</li>                </ul>            </div>            <!-- Service Card 3 --><div class="bg-white rounded-lg p-8 shadow-md hover:shadow-xl transition-shadow duration-300 transform hover:-translate-y-1 flex flex-col">                <img src="https://images.unsplash.com/photo-1576086213369-97a306d36557?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=400&h=250&q=80" alt="Lab Plumbing" class="rounded-md shadow-sm mb-6 w-full h-48 object-cover" onerror="this.src='https://placehold.co/400x250/fca5a5/7f1d1d?text=Lab+Plumbing&font=inter'">                <h4 class="text-2xl font-semibold text-red-700 mb-4">Design and Build Plumbing and Sanitary for Laboratory</h4>                <p class="text-gray-600 text-sm mb-4 flex-grow">Expert plumbing and sanitary solutions for demanding laboratory environments, meeting stringent quality and safety standards.</p>                <ul class="mt-2 mb-2 text-gray-700 text-xs list-disc ml-4 space-y-1">                  <li>Lab-specific water, gas, and vacuum lines</li>                  <li>Biohazard and chemical handling arrangements</li>                  <li>Compliance assurance & maintenance</li>                </ul>            </div>        </div>    </section>    <!-- Projects Section --><section id="projects" class="py-24 px-8 bg-gray-50">        <h3 class="text-4xl font-bold text-center mb-16 text-gray-800">Featured Projects</h3>        <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-10 max-w-6xl mx-auto">            <!-- Project Card 1 --><div class="bg-white rounded-xl shadow-lg overflow-hidden transform hover:scale-105 transition-transform duration-300">                <img src="https://images.unsplash.com/photo-1519923311847-f4f0c4033e0c?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=400&h=300&q=80" alt="LTA Sky Camera" class="w-full h-56 object-cover" onerror="this.src='https://placehold.co/400x300/f87171/7f1d1d?text=LTA+Sky+Camera&font=inter'">                <div class="p-6">                    <h4 class="text-2xl font-semibold text-red-700 mb-3">LTA Sky Camera (Solar)</h4>                    <p class="text-gray-600 text-sm"><strong>Client:</strong> Land Transport Authority (LTA)<br><strong>Scope:</strong> Design and build outdoor IP PTZ camera surveillance systems with solar power integration for road and traffic monitoring.<br><strong>Status:</strong> Delivered<br><strong>Details:</strong> CCTV surveillance implemented in high-exposure zones; solution emphasizes renewable energy and remote accessibility.</p>                </div>            </div>            <!-- Project Card 2 --><div class="bg-white rounded-xl shadow-lg overflow-hidden transform hover:scale-105 transition-transform duration-300">                <img src="https://images.unsplash.com/photo-1581093468032-b0c4731a5c61?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=400&h=300&q=80" alt="ELV Systems" class="w-full h-56 object-cover" onerror="this.src='https://placehold.co/400x300/f87171/7f1d1d?text=ELV+System&font=inter'">                <div class="p-6">                    <h4 class="text-2xl font-semibold text-red-700 mb-3">ELV System Design & Build</h4>                    <p class="text-gray-600 text-sm"><strong>Client:</strong> Corporate/Institutional<br><strong>Scope:</strong> Complete Extra-Low Voltage (ELV) systems: CCTV, access control, IT/AV, and alarm systems for new-build and retrofits.<br><strong>Status:</strong> Delivered<br><strong>Details:</strong> Projects executed include public and private sector facilities, integrating security and AV technologies for seamless operations.</p>                </div>            </div>            <!-- Project Card 3 --><div class="bg-white rounded-xl shadow-lg overflow-hidden transform hover:scale-105 transition-transform duration-300">                <img src="https://images.unsplash.com/photo-1628799011030-c48395536b04?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=400&h=300&q=80" alt="FOA Technician" class="w-full h-56 object-cover" onerror="this.src='https://placehold.co/400x300/f87171/7f1d1d?text=Fiber+Optic+Technician&font=inter'">                <div class="p-6">                    <h4 class="text-2xl font-semibold text-red-700 mb-3">FOA – Fiber Optic Technician</h4>                    <p class="text-gray-600 text-sm"><strong>Client:</strong> Research and Manufacturing<br><strong>Scope:</strong> Certified FOA technician deployment for site-wide fiber optic network installation, testing, and maintenance.<br><strong>Status:</strong> Ongoing<br><strong>Details:</strong> FOA certification enables advanced troubleshooting and high-speed backbone deployment for data-intensive facilities.</p>                </div>            </div>            <!-- Project Card 4 --><div class="bg-white rounded-xl shadow-lg overflow-hidden transform hover:scale-105 transition-transform duration-300 md:col-span-2 lg:col-span-1">                <img src="https://images.unsplash.com/photo-1600880292203-5d4bb61a3b43?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=400&h=300&q=80" alt="Interior Office Laboratory Fit Out" class="w-full h-56 object-cover" onerror="this.src='https://placehold.co/400x300/f87171/7f1d1d?text=Office+Lab+Fit+Out&font=inter'">                <div class="p-6">                    <h4 class="text-2xl font-semibold text-red-700 mb-3">Interior Office and Laboratory Fit Out</h4>                    <p class="text-gray-600 text-sm"><strong>Client:</strong> SME/Enterprise<br><strong>Scope:</strong> Modern offices and laboratory setups, including turnkey design-build for functional, safe and comfortable environments.<br><strong>Status:</strong> Delivered<br><strong>Details:</strong> Emphasis on user-centric workflow, safety, and ergonomic design. Projects meeting ISO and SS standards.</p>                </div>            </div>        </div>    </section>    <!-- Contact Section --><section id="contact" class="py-24 px-8 bg-white text-gray-800 text-center">        <h3 class="text-4xl font-bold mb-6">Get in Touch</h3>        <p class="max-w-2xl mx-auto mb-10 text-gray-600 text-lg">Ready to elevate your business? Fill out the form below or use our AI assistant to draft your project scope.</p>        
        <form class="max-w-2xl mx-auto bg-gray-50 p-8 rounded-lg shadow-lg text-left" onsubmit="handleFormSubmit(event)">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                <div>
                    <label for="name" class="block text-sm font-semibold text-gray-700 mb-2">Full Name</label>
                    <input type="text" id="name" name="name" class="w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-red-500" required>
                </div>
                <div>
                    <label for="email" class="block text-sm font-semibold text-gray-700 mb-2">Email Address</label>
                    <input type="email" id="email" name="email" class="w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-red-500" required>
                </div>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                <div>
                    <label for="phone" class="block text-sm font-semibold text-gray-700 mb-2">Phone Number</label>
                    <input type="tel" id="phone" name="phone" class="w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-red-500">
                </div>
                <div>
                    <label for="company" class="block text-sm font-semibold text-gray-700 mb-2">Company</label>
                    <input type="text" id="company" name="company" class="w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-red-500">
                </div>
            </div>

            <!-- Gemini AI Assistant -->
            <div class="bg-red-50 border-l-4 border-red-400 p-4 rounded-lg mb-6">
                <label for="ai-service-select" class="block text-sm font-bold text-red-700 mb-2">✨ AI Project Assistant</label>
                <p class="text-sm text-gray-600 mb-3">Need help describing your project? Select a service and let our AI draft an inquiry for you.</p>
                <div class="flex flex-col sm:flex-row gap-4">
                    <select id="ai-service-select" class="flex-grow w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-red-500">
                        <option value="">-- Select a service --</option>
                        <option value="Interior Office & Laboratory Fit Out Works">Office/Lab Fit Out</option>
                        <option value="Design and Build Electrical & ELV">Electrical & ELV</option>
                        <option value="Design and Build Plumbing and Sanitary for Laboratory">Lab Plumbing & Sanitary</option>
                        <option value="Design and Build LTA Sky Camera Outdoor IP PTZ with Solar Power System">LTA Sky Camera (Solar)</option>
                        <option value="FOA – Fiber Optic Technician">Fiber Optic Services</option>
                    </select>
                    <button type="button" id="ai-draft-btn" class="flex-shrink-0 bg-red-500 text-white font-semibold px-5 py-2 rounded-full shadow-md hover:bg-red-600 transition duration-300 flex items-center justify-center">
                        <span id="ai-btn-text">✨ Help Me Draft Inquiry</span>
                        <svg id="ai-btn-loader" class="loader w-5 h-5 border-4 border-t-red-500 border-white rounded-full hidden" viewBox="0 0 24 24"></svg>
                    </button>
                </div>
            </div>
            <!-- End Gemini AI Assistant -->

            <div class="mb-6">
                <label for="message" class="block text-sm font-semibold text-gray-700 mb-2">Message</label>
                <textarea id="message" name="message" rows="6" class="w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-red-500" required placeholder="Please describe your project requirements..."></textarea>
            </div>
            <div>
                <button type="submit" class="w-full bg-red-700 text-white font-semibold px-12 py-3 rounded-full shadow-lg hover:bg-red-800 transition duration-300">Send Message</button>
            </div>
        </form>
    </section>    <!-- Footer --><footer class="bg-red-900 text-red-200 py-10 px-6">        <div class="max-w-6xl mx-auto grid md:grid-cols-3 gap-8 text-center md:text-left">            <!-- Column 1: Info --><div>                <p class="text-lg font-semibold mb-4 text-white">MULTI POWER BUILDERS PTE. LTD.</p>                <p class="mb-2">45 Jalan Pemimpin<br>#10-03 Foo Wah Industrial Building<br>SINGAPORE 577197</p>                <p class="mb-2"><strong>Tel:</strong> +65 9859 0679 / +65 64911336</p>                <p class="mb-2"><strong>Email:</strong> raymond@multipowersg.com</p>            </div>            <!-- Column 2: Quick Links --><div>                <h5 class="text-lg font-semibold mb-4 text-white">Quick Links</h5>                <nav class="flex flex-col space-y-2">                    <a href="#" class="hover:text-white transition duration-300">Home</a>                    <a href="#about" class="hover:text-white transition duration-300">About Us</a>                    <a href="#services" class="hover:text-white transition duration-300">Services</a>                    <a href="#projects" class="hover:text-white transition duration-300">Projects</a>                    <a href="#contact" class="hover:text-white transition duration-300">Contact</a>                </nav>            </div>            <!-- Column 3: Placeholder --><div>                <h5 class="text-lg font-semibold mb-4 text-white">Our Commitment</h5>                <p>Delivering excellence and reliability in every project, ensuring client satisfaction through quality workmanship and timely completion.</p>            </div>        </div>        <div class="text-center text-sm text-red-300 mt-10 pt-6 border-t border-red-800">            © 2025 MULTI POWER BUILDERS PTE. LTD. All rights reserved.        </div>    </footer>

    <!-- Global Message Modal -->
    <div id="message-modal" class="modal-backdrop hidden fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center z-50 p-4" aria-labelledby="modal-title" role="dialog" aria-modal="true">
        <div class="modal-content bg-white rounded-lg shadow-xl max-w-sm w-full p-6 text-center transform scale-95 opacity-0">
            <h3 id="message-modal-title" class="text-xl font-bold text-gray-800 mb-4">Notice</h3>
            <p id="message-modal-text" class="text-gray-600 mb-6">This is a message.</p>
            <button id="message-modal-close" class="bg-red-500 text-white font-semibold px-6 py-2 rounded-full shadow-md hover:bg-red-600 transition duration-300">Close</button>
        </div>
    </div>

    <script>        const menuBtn = document.getElementById('menu-btn');        const mobileMenu = document.getElementById('mobile-menu');        // Toggle mobile menu        menuBtn.addEventListener('click', () => {             mobileMenu.classList.toggle('hidden');             // Toggle ARIA expanded state            const isExpanded = menuBtn.getAttribute('aria-expanded') === 'true';            menuBtn.setAttribute('aria-expanded', !isExpanded);            // Optional: Change icon on toggle            if (!isExpanded) {                menuBtn.innerHTML = `<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>`;            } else {                menuBtn.innerHTML = `<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>`;            }        });        // Close mobile menu when a link is clicked        const mobileLinks = mobileMenu.querySelectorAll('a');        mobileLinks.forEach(link => {             link.addEventListener('click', () => {                 mobileMenu.classList.add('hidden');                 menuBtn.setAttribute('aria-expanded', 'false');                 menuBtn.innerHTML = `<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>`;             });         });

        // --- Gemini AI Assistant & Contact Form ---

        const aiDraftBtn = document.getElementById('ai-draft-btn');
        const aiBtnText = document.getElementById('ai-btn-text');
        const aiBtnLoader = document.getElementById('ai-btn-loader');
        const aiServiceSelect = document.getElementById('ai-service-select');
        const messageTextarea = document.getElementById('message');
        
        // Modal elements
        const messageModal = document.getElementById('message-modal');
        const modalBackdrop = messageModal.querySelector('.modal-backdrop');
        const modalContent = messageModal.querySelector('.modal-content');
        const modalTitle = document.getElementById('message-modal-title');
        const modalText = document.getElementById('message-modal-text');
        const modalCloseBtn = document.getElementById('message-modal-close');

        // Function to show a message
        function showMessage(title, text) {
            modalTitle.textContent = title;
            modalText.textContent = text;
            messageModal.classList.remove('hidden');
            // Trigger transition
            setTimeout(() => {
                modalBackdrop.classList.remove('opacity-0');
                modalContent.classList.remove('scale-95', 'opacity-0');
                modalContent.classList.add('scale-100', 'opacity-100');
            }, 10);
        }

        // Function to hide the message
        function hideMessage() {
            modalBackdrop.classList.add('opacity-0');
            modalContent.classList.add('scale-95', 'opacity-0');
            modalContent.classList.remove('scale-100', 'opacity-100');
            setTimeout(() => {
                messageModal.classList.add('hidden');
            }, 300); // Wait for transition to finish
        }

        // Close modal event
        modalCloseBtn.addEventListener('click', hideMessage);
        messageModal.addEventListener('click', (e) => {
            if (e.target === messageModal) {
                hideMessage();
            }
        });

        // Handle form submission
        function handleFormSubmit(event) {
            event.preventDefault(); // Prevent actual form submission
            // In a real app, you'd send this data to a server.
            // For this demo, we'll just show a success message.
            showMessage('Message Sent (Demo)', 'Thank you for your inquiry! We will get back to you shortly.');
            // Clear the form
            event.target.reset();
            messageTextarea.value = '';
        }

        // Handle AI Draft Button Click
        aiDraftBtn.addEventListener('click', () => {
            const selectedService = aiServiceSelect.value;
            if (!selectedService) {
                showMessage('Error', 'Please select a service from the dropdown first.');
                return;
            }

            // Show loading state
            aiBtnText.classList.add('hidden');
            aiBtnLoader.classList.remove('hidden');
            aiDraftBtn.disabled = true;
            messageTextarea.value = '✨ Generating draft...';

            // Define the prompts for the Gemini API
            const systemPrompt = `You are an expert assistant for a Singapore-based construction and electrical engineering firm called "MULTI POWER BUILDERS PTE. LTD." Your goal is to help a potential client draft a clear inquiry message for a price quote. 
            
            Based on the client's selected service, generate a short, professional message that starts with "To whom it may concern," and includes a bulleted list of 3-5 key qualifying questions. These questions should help the client provide the necessary details (like project scope, size, timeline, or specific requirements) for an accurate quote.
            
            Keep the tone polite and helpful. The selected service is: "${selectedService}".`;

            const userQuery = `Generate the draft inquiry message for the "${selectedService}" service.`;
            
            callGeminiAPI(systemPrompt, userQuery);
        });

        // Function to call the Gemini API
        async function callGeminiAPI(systemPrompt, userQuery) {
            const apiKey = ""; // API key is handled by the environment
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;

            const payload = {
                contents: [{ parts: [{ text: userQuery }] }],
                systemInstruction: {
                    parts: [{ text: systemPrompt }]
                },
            };

            // Implement exponential backoff for retries
            let response;
            let retries = 0;
            const maxRetries = 3;
            let delay = 1000; // 1 second

            while (retries < maxRetries) {
                try {
                    response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    if (response.ok) {
                        const result = await response.json();
                        const text = result.candidates?.[0]?.content?.parts?.[0]?.text;

                        if (text) {
                            messageTextarea.value = text;
                        } else {
                            throw new Error('No content returned from API.');
                        }
                        
                        // Success, break the loop
                        break; 

                    } else if (response.status === 429 || response.status >= 500) {
                        // Throttling or server error, retry
                        retries++;
                        if (retries >= maxRetries) {
                            throw new Error('API is busy. Please try again later.');
                        }
                        await new Promise(resolve => setTimeout(resolve, delay));
                        delay *= 2; // Exponential backoff
                    } else {
                        // Other client-side error, don't retry
                        const errorResult = await response.json();
                        throw new Error(errorResult.error?.message || 'An unknown API error occurred.');
                    }

                } catch (error) {
                    // Handle network errors or errors from the loop
                    if (retries >= maxRetries) {
                        messageTextarea.value = 'Sorry, we couldn\'t generate a draft right now. Please describe your project manually.';
                        showMessage('AI Assistant Error', `Error: ${error.message || 'Failed to connect to AI service.'}`);
                        break; // Exit loop
                    }
                    if (error.name !== 'TypeError') { // Don't log network errors as retries
                      retries++;
                      await new Promise(resolve => setTimeout(resolve, delay));
                      delay *= 2;
                    } else {
                      // Handle critical errors like fetch failures
                      messageTextarea.value = 'Sorry, we couldn\'t generate a draft right now. Please describe your project manually.';
                      showMessage('AI Assistant Error', `Error: ${error.message || 'Failed to connect to AI service.'}`);
                      break;
                    }
                }
            }

            // Hide loading state
            aiBtnText.classList.remove('hidden');
            aiBtnLoader.classList.add('hidden');
aiDraftBtn.disabled = false;
        }

    </script></body></html>


